1. 交换机简介
  交换机, 英文是Switch，顾名思义，就是开关的意思。

2. 背景
  对于接入设备的节点，如果要想使之连通，最简单的方法就是两两接入口都有一条物理电线。
  最开始的电话系统就是这么做的，但这样做的一个明显弊端就是接口的数量不能太多，
  因为需要n*(n-1)/2根电线才行，是会成几何级数增长的。一个24口就需要24*23/2= 276根电线，48口需要1128根电线。

3. 解决方法
  于是，出现了一种电子设备，它可以为接入的任意两个网络节点，提供独享的电信号通路。
  
4. 智能
  上面的工作把电线都连接好了，但如果某个端口收到电信号以后，该用哪根电线去连通呢。
  当然也可以连通所有的电线(这样就变成了集线器HUB)，
  但更智能的方法是解包，发现目的地址，并只把数据传输到目的地址上。
  但解包又是解的什么包呢。MAC? IP? 

5. 二层交换机
  这里的二层，指的是第二层，也就是数据链路层。而不是两层的意思。
  也就是说，解出MAC地址来转发的技术。
  二层交换机会维护一个<MAC地址, 电线>的列表，当解出未知的MAC地址时，就将包在网络上广播。
  如果有目的机器做出回应，交换机就将这个对应关系加入到列表中，下次就知道了。
  所以，二层交换机需要维护一个所有MAC的列表，还会广播未知的数据包。这使其只能用在小型的局域网中。
  
6. 三层交换机
  二层交换机会维护一个<MAC地址, 电线>的列表，在必要时，将数据包在网络上广播。
  三层交换机其实是在二层交换机基础上的改进。发现未知MAC时，通过IP层的路由表，以发送ARP数据包的形式，获取到MAC地址。
  查找路由表的工作，需要交由CPU管理，因此可分为硬件(交换机自带CPU)、软件两种方案。
  显然，三层交换机已经在做路由器的工作了，因此又称做路由器交换机。
  
7. 四层交换机
  通过二、三层交换机，唯一的MAC地址，对应唯一的机器。
  但在应用的角度看，这会出现单点故障、负载均衡的问题。为了解决这些问题，有了VIP
  VIP引入了端口的概念，因此叫做四层交换机。
  例如 VIP:80 对应 [IP1:80, IP1:90, IP2:80]，用户连接VIP:80，交换机会根据负载平衡，实际连接到其中之一。
  通过VIP，巧妙的实现了1:N的关系，实现了负载均衡，解决的单点故障。
  





